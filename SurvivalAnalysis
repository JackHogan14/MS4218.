##LOAD IN DATA AND SURVIVAL FN'S
setwd("C:\\Users\\14171716\\Downloads")
kidney <- read.csv("kidney.csv")
attach(kidney)
head(kidney)
library(survival)
#DEFINING VARIABLES
summary(kidney)
time<- time
event<- status
X<- cbind(cause, cause2, creat, egfr, ckd, ckd_stage,aki, aki_stage, urea, hgb, wbcs, neut, lymph,potas, alb, prot, tsh, creatgrp)
#MESSING AROUND WITH VARIOUS VARIABLES IN THE DATASET
hist(kidney$time)
hist(kidney$creat)
boxplot(time~year, data=kidney)
boxplot(creat~ckd_stage, kidney)
#KAPLAN-MEIER SECTION
KM1 <- survfit(Surv(time,event==1)~ckd_stage, data=kidney)
plot(KM1, ylim=c(0,1), col=1:9)
plot(KM1, ylim=c(0,1), col=rep(1:9, each=3), conf.int=TRUE)
KM2 <- survfit(Surv(time,event==1)~age, data=kidney)
plot(KM2, ylim=c(0,1), col=1:9)table(kidney$age)
KM3 <- survfit(Surv(time,event==1)~age+ckd, data=kidney)
plot(KM3, ylim=c(0,1), col=1:9)
KM3
table(kidney$ckd_stage)
#GROUPING CREATININE TO BE ABLE TO GET A KAPLAN-MEIER REPRESENTATION
quantile(kidney$creat)
kidney$creatgrp <- cut(kidney$creat, c(0, 65, 76, 90, Inf))
table(kidney$creatgrp)
KM4 <- survfit(Surv(time,event==1)~creatgrp, data=kidney)
plot(KM4, ylim=c(0.7,1), col=1:9)
# next thing (cox model) main function is coxph
head(kidney)
#?coxph
Cox1<-coxph(Surv(time,event==1)~ X )
Cox1
plot(Cox1)
# cause variable is for competing risks (later)
table(kidney$cause2)
##
